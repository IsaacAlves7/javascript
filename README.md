<div align="center"><a href="https://github.com/IsaacAlves7/js/tree/node.js"><img src="https://github.com/IsaacAlves7/js/assets/61624336/ba4601b6-4c36-4b21-a4ab-acfd4ea58b36" title="Site do Node.js"/></a></div>

#  It's a repository of Node.js development ‚¨¢

> ‚¨¢ **Prepara√ß√£o**: Para este conte√∫do, o aluno dever√° dispor de um computador com acesso √† internet, um web browser com suporte a HTML 5 (Google Chrome, Mozilla Firefox, Microsoft Edge, Safari, Opera etc.), um editor de texto ou IDE (VSCode etc.).

<div align="center">

<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript"><img src="https://ih1.redbubble.net/image.1425531665.0948/raf,750x1000,075,t,FFFFFF:97ab1c12de.jpg" height="177"></a>

</div>

[![Node.js](https://img.shields.io/badge/-Rocketseat-512BD4?style=for-the-badge&logo=Node.js&logoColor=339933)](https://www.youtube.com/watch?v=DiXbJL3iWVs)
[![Node.js](https://img.shields.io/badge/-Rocketseat-7DCDA3?style=for-the-badge&logo=Node.js&logoColor=339933)](https://www.youtube.com/watch?v=DiXbJL3iWVs)
[![Node.js](https://img.shields.io/badge/-Rocketseat-7DCDA3?style=for-the-badge&logo=Node.js&logoColor=339933)](https://www.youtube.com/watch?v=DiXbJL3iWVs)
[![Node.js](https://img.shields.io/badge/-Rocketseat-7DCDA3?style=for-the-badge&logo=Node.js&logoColor=339933)](https://www.youtube.com/watch?v=DiXbJL3iWVs)
[![Node.js](https://img.shields.io/badge/-Rocketseat-7DCDA3?style=for-the-badge&logo=Node.js&logoColor=339933)](https://www.youtube.com/watch?v=DiXbJL3iWVs)
[![Node.js](https://img.shields.io/badge/-Rocketseat-7DCDA3?style=for-the-badge&logo=Node.js&logoColor=339933)](https://www.youtube.com/watch?v=DiXbJL3iWVs)

<!-- # Google Chrome Inspect
<div align="center"><a href="#"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/Google_Chrome_icon_%28February_2022%29.svg" title="Google Chrome Inspector" height="277"/></a></div>

- chrome://inspect/#devices -->

# ‚¨¢ Node.js <img src="https://img.shields.io/badge/V8-14.0.0-00C244?style=flat&logo=V8&logoColor=white"> <img src="https://img.shields.io/badge/C++-14.0.0-00A95C?style=flat&logo=CPlusPlus&logoColor=white"> <img src="https://img.shields.io/badge/Node.js-16.17.0-339933?style=flat&logo=Node.js&logoColor=white">
<a href="https://nodejs.org/en/"><img src="https://cdn.worldvectorlogo.com/logos/nodejs-1.svg" height="177" title="Site do Node.js" align="right"/></a>

Em 2009, <a href="https://github.com/ry">Ryan Dahl</a> desenvolveu o <b>Node.js</b> que √© um run-time-environment do JavaScript, ou seja, um ambiente de execu√ß√£o do JS, dessa forma ele pode entender a linguagem de programa√ß√£o JavaScript e executar c√≥digos do mesmo, portanto onde for poss√≠vel instalar o Node.js se torna poss√≠vel usar o JS. O Node usa o V8 (A engine/ motor do Google Chrome) fora do navegador, e possui muitas outras funcionalidades que nos permite programar com JavaScript no lado do servidor. Com o Node foi poss√≠vel a cria√ß√£o de coisas como automatizadores de tarefas e cria√ß√£o de servidores em JavaScript.

<img src="https://cdn.worldvectorlogo.com/logos/v8-5.svg" height="100" title="Site do Node.js" align="left"/>

> Em setembro de 2008 a Google lan√ßou seu navegador, o **Google Chrome**. O Chrome tem um interpretador/motor (engine) de JavaScript muito poderoso, o **V8**. Esse nome √© baseado no motor de combust√£o V8, que tem esse nome por ter 8 cilindros unidos na parte de baixo, formando um "V". S√£o normalmente usados em autom√≥veis de grande porte, embarca√ß√µes mar√≠timas, aeron√°uticas, etc.
>
> O V8 "compila" o JavaScript, mas por tr√°s ele executa a linguagem **C++**. Assim, o JavaScript ganhou muita velocidade, pr√≥ximo a um c√≥digo bin√°rio compilado.
  
Empresas grandes come√ßaram a migrar de linguagens como Ruby e Java para o Node.js, como √© o caso do PayPal, Yahoo!, eBay, Linkedin e Trello. Todas elas afirmam que conseguiram desenvolver em menos tempo, com menos linhas de c√≥digos e que seus sistemas agora possuem um melhor desempenho.

<blockquote>Lembrando, o <b>Node.js</b> n√£o √© uma linguagem de programa√ß√£o ou framework ou biblioteca, mas sim um <b>interpretador</b> da linguagem de programa√ß√£o JavaScript que roda fora dos navegadores.</blockquote>

Antigamente, o JavaScript foi feito apenas para rodar na interface/ cliente dos navegadores (preso apenas no Front-End e est√°tico). Ent√£o, com a chegada do Node.js permitiu que rodasse a linguagem no lado do servidor para criar qualquer tipo de aplica√ß√£o, n√£o somente web, mas qualquer outro tipo de aplica√ß√£o.

Com o Node.js conseguimos criar:

<a href="https://nodejs.org/en/"><img src="https://github.com/IsaacAlves7/js/assets/61624336/da0c322f-1825-481f-995f-bab669f7e326" height="177" title="Site do Node.js" align="right"/></a>

- P√°ginas interativas e din√¢micas;
- Jogos eletr√¥nicos;
- Anima√ß√µes;
- Aplica√ß√µes para desktop;
- Aplica√ß√µes de linha de comando;
- Aplicativos m√≥veis;
- Aplica√ß√µes back-end;
- Aplica√ß√µes Web;
- IA - Intelig√™ncia Artificial;
- Conex√£o com banco de dados;
- Integra√ß√£o entre sistemas;
- Sistemas de pagamento;
- Redes Sociais;
- Apps de Streaming, como a Netflix;

Porque usar o Node.js?

- Muito leve;
- Muito r√°pido;
- Alta escalabilidade;
- Utiliza o JavaScript (Uma linguagem r√°pida em runtime);
- Tem um dos melhores ecossistemas do mundo;
- Muito utilizado pelas empresas, com as melhores vagas no mercado;
- Processa bem mais r√°pido que o PHP no servidor (PHP faz 120.000 requisi√ß√µes por segundo, o Node.js consegue receber mais de 1.000.000 por segundo);
- Muitas bibliotecas feitas com o Node.js e o JavaScript;
- Posso utilizar a linguagem JavaScript tanto pro back-end quanto pro front-end, n√£o preciso de outras linguagens para isso! Uma s√≥ j√° basta.

## Instala√ß√£o do Node.js
<a href="https://nodejs.org/en/"><img src="https://dicasdejavascript.com.br/images/instalacao-nodejs-windows/instalador-nodejs-01-tela-boas-vindas.png" height="270" title="Site do Node.js" align="right"/></a>

O primeiro passo √© instalar o Node.js, tendo consequentemente o NPM instalado. Ele pode ser instalado de duas maneiras:

- Instaladores (dispon√≠veis para os sistemas operacionais Windows e Linux)
- NVM (de node version manager)

Conforme consta na documenta√ß√£o oficial do Node, deve-se dar prefer√™ncia √† segunda forma, j√° que os instaladores costumam armazenar os arquivos do NPM em diret√≥rios com permiss√µes apenas locais, e isso poder√° causar alguns erros quando quisermos instalar e utilizar **pacotes a n√≠vel global**.

> As ferramentas de gerenciamento de depend√™ncias permitem a instala√ß√£o de pacotes/depend√™ncias de maneira local ou global. A local limita os pacotes aos projetos nos quais foram instalados, enquanto a global permite sua utiliza√ß√£o em todos os projetos.

Ap√≥s realizar as instala√ß√µes do Node.js e do NPM, certifique-se de que ambos j√° est√£o rodando e dispon√≠veis por meio das seguintes linhas de comando no terminal, onde trabalharemos a maior parte do tempo nas tarefas de instala√ß√£o, build e deploy:

- CMD (no Windows)
- Bash (no Linux)

Caso o processo de instala√ß√£o tenha sido completado com sucesso, estes comandos retornam as vers√µes instaladas:

```sh
node -v
npm -v
```

> Sempre recomendo que instale a vers√£o LTS.

### Windows
- https://nodejs.org/en/

### Linux
No diret√≥rio do usu√°rio (root):

```sh
sudo apt install nodejs
```

# üì¶ `npm` - Node Package Manager
<div align="center"><a href="https://www.npmjs.com/"><img src="https://cdn.worldvectorlogo.com/logos/npm.svg" height="177" title="Site do NPM"/></a></div><br \>

O **NPM** (**N**ode **P**ackage **M**anager) √© o gerenciador de pacotes do Node.js, mesmo sendo o gerenciador ele tamb√©m √© independente do Node.js. √â atrav√©s do NPM que podemos instalar a bibliotecas do Node para desenvolver qualquer tipo de aplica√ß√£o.

## Alguns comandos mais utilizados no NPM

### Inicializando o projeto com o `package.json`

[![NPM](https://img.shields.io/badge/-npm_init-fff?style=social&logo=npm&logoColor=red)](#) [![NPM](https://img.shields.io/badge/-package.json-fff?style=social&logo=Node.js&logoColor=green)](#)

```sh
npm init
```

<img src="https://i.stack.imgur.com/VQVGv.gif" align="right">


#### Listando todos os pacotes instalados pelo NPM (local)
```sh
npm list -g
```

[![NPM](https://img.shields.io/badge/-npm-fff?style=social&logo=npm&logoColor=red)](#)

```sh
npm list -g --depth=0
```

#### Atualizando o NPM para a vers√£o mais recente
```sh
sudo npm install npm -g
```

#### Removendo/ Desinstalando um pacote do NPM (local)
```
npm -g uninstall <nome do pacote>
```
#### NPM Save
```
npm install <pacote> --save
```

# üß∂ `yarn` - yet another resource negotiator
<img src="https://cdn.worldvectorlogo.com/logos/yarn.svg" height="177" align="right">

O **YARN** (sigla de yet another resource negotiator) foi lan√ßado em 2016 pelo Facebook com outras empresas ‚Äî entre elas, a Google. Sua cria√ß√£o teve como premissa resolver alguns problemas de seguran√ßa existentes no NPM √† √©poca, al√©m de tornar mais r√°pido o processo de instala√ß√£o de depend√™ncias.

> Outra caracter√≠stica pr√≥pria do YARN √© a forma como a gest√£o de depend√™ncias √© realizada: por interm√©dio de um arquivo de lock denominado `yarn.lock`, √© guardada a vers√£o exata de cada depend√™ncia, garantindo, assim, uma igualdade em todas as instala√ß√µes.

Por mais que o NPM atualmente tamb√©m d√™ suporte a tal parametriza√ß√£o, o YARN faz isso de forma autom√°tica. Na compara√ß√£o entre ambos, alguns benchmarks apontam diferen√ßas, vantagens e desvantagens de um em rela√ß√£o ao outro.

No final das contas ‚Äî e como √© bastante comum em ferramentas ‚Äúconcorrentes‚Äù ‚Äî, cada nova atualiza√ß√£o deixa ambos muito parecidos. O mais importante, nesse caso, √© que os desenvolvedores t√™m em m√£os duas excelentes alternativas para realizar a tarefa de gest√£o de depend√™ncias.

Tanto o NPM quanto o YARN cumprem a mesma fun√ß√£o: gerenciar a instala√ß√£o de depend√™ncias de um projeto React Native. Embora isso se d√™ com processos diferentes, ambos utilizam o arquivo `package.json` para anotar as depend√™ncias e suas vers√µes, al√©m de baixarem e salvarem as depend√™ncias/bibliotecas na pasta `node_modules`.

> **Aten√ß√£o**: O importante na escolha do gerenciador √© usar apenas um deles no projeto. Isso evita comportamentos inadequados e/ou at√© mesmo falhas e conflitos de depend√™ncias. Ao longo deste estudo, utilizaremos o NPM.

## Hello, World - Node.js
<div align="center"><a href="https://nodejs.org/en/"><img src="https://user-images.githubusercontent.com/61624336/160043697-22c1186b-d7e5-44f1-9e14-cce2d3368eff.png" height="177" title="Site do Node.js"/></a></div><br \>

Crie uma pasta e l√° crie o script `App.js` e escreva o seguinte comando:

```javascript
console.log(Hello, World)
```

Ele exibir√° no console do seu terminal, utilize o comando:

#### Startar a aplica√ß√£o no console do terminal
```
node app.js
```

Vamos fazer um c√≥digo mais elaborado!

```javascript
var mostrarSite = false;
const site = "www.isaacalves7.com";

console.log("Hello, World!");
console.log("Meu nome √© Isaac");
console.log("Estou aprendendo Node.js");

if(mostrarSite){ // Se mostrarSite
   console.log(site); // Printe o site   
}
```

Ele printou de ordem decrescente e n√£o printou o `mostrarSite`, pois s√≥ printaria se fosse verdadeiro e, no caso, a vari√°vel foi declarada como falsa. Ou seja, o site n√£o existe no escopo, somente na vari√°vel!

# Express
<div align="center"><a href="https://nodejs.org/en/"><img src="https://cdn.worldvectorlogo.com/logos/express-109.svg" height="270" title="Site do Node.js"/></a></div><br \>
<div align="center"><a href="https://nodejs.org/en/"><img src="https://www.vectorlogo.zone/logos/expressjs/expressjs-ar21.svg" height="270" title="Site do Node.js"/></a></div><br \>

```npm
npm install express
```

# üî≤ Socket.io
<div align="center"><a href="https://nodejs.org/en/"><img src="https://www.vectorlogo.zone/logos/socketio/socketio-ar21.svg" height="270" title="Site do Node.js"/></a></div><br \>

The **Socket.io** is an awesome library that provides a real-time event-driven connection between a client and server relying on Websockets and other protocols and approaches to guarantee the real-time capability and performance boost when it comes to handling thousands of socket connections and load balancing it on multiple servers.

- https://www.igniterealtime.org/downloads/#spark
- https://pusher.com/

# üü• Meteor.js
<div align="center"><a href="https://nodejs.org/en/"><img src="https://cdn.worldvectorlogo.com/logos/meteor-5.svg" height="277" title="Site do Node.js"/></a></div><br \>

# üü™ Adonis.js
<div align="center"><a href="https://nodejs.org/en/"><img src="https://www.vectorlogo.zone/logos/adonisjs/adonisjs-ar21.svg" height="277" title="Site do Node.js"/></a></div><br \>

## Desenvolvimento back-end com Node.js
<div align="center"><a href="https://nodejs.org/en/"><img src="https://cdn.worldvectorlogo.com/logos/nodejs.svg" height="197" title="Site do Node.js"/></a></div><br \>

O **Node.js** √© uma ferramenta para a execu√ß√£o de uma variedade de ambientes com JavaScript (JS). JavaScript had humble beginnings as a language that lived only in web browsers, but the Node.js project has expanded its reach and helped make it the most popular programming language in the world. Node.js extends the creative potential of people with web development experience, enabling a new generation of developers to create servers, command-line tools, desktop apps, and even robots.

```
npm install express
node index.js
```

# pg-promise API
- http://vitaly-t.github.io/pg-promise/

## Nodemon
<div align="center"><a href="https://nodejs.org/en/"><img src="https://cdn.worldvectorlogo.com/logos/nodemon.svg" height="177" title="Site do Node.js"/></a></div><br \>

## Node-Sass
<div align="center"><a href="https://nodejs.org/en/"><img src="https://cdn.worldvectorlogo.com/logos/node-sass.svg" height="177" title="Site do Node.js"/></a></div><br \>

## Node.js
<div align="center"><a href="https://nodejs.org/en/"><img src="https://camo.githubusercontent.com/342d0b4d47c3c88c7542ddeb7bc8f7e4b6dbf8b496ca4f4f6c66a11659bbc180/68747470733a2f2f6e6f64656a732e6f72672f7374617469632f696d616765732f66617669636f6e732f6170706c652d746f7563682d69636f6e2e706e67" height="177" title="Site do Node.js"/></a></div><br \>

## Node.js
<div align="center"><a href="https://nodejs.org/en/"><img src="https://cdn.shopify.com/s/files/1/1527/3235/products/black_173x.png?v=1547235693" height="177" title="Site do Node.js"/></a></div><br \>

https://replit.com/languages/nodejs


# üìú Promises
As promises s√£o muito necess√°rias porque paralelalizam cada componente do site, ou seja, os arquivos HTML, CSS e JS funcionam de maneira paralela.

## Uso de c√≥digo ass√≠ncrono
- Requests HTTP
- Leitura de arquivos
- Acesso a servi√ßo externo
- I/O

![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108413280-967d5380-7209-11eb-8b64-3dbf1f3f79c5.jpg)

No c√≥digo ass√≠ncrono, ao inv√©s de ter o fluxo seguindo um de cada vez, teremos na verdade todas as quatro requisi√ß√µes que fizemos ao mesmo tempo e o tempo total ser√° da maior Promise, que √© o tempo que demorou a maior requisi√ß√£o acontecer. Ent√£o, isso reduz drasticamente o tempo de execu√ß√£o do seu c√≥digo e isso tamb√©m ajuda voc√™ poder otimizar o tempo que voc√™ est√° tendo na hora de fazer alguma requisi√ß√£o de dados.

## Promises no Node.js
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108413712-1b686d00-720a-11eb-8656-f5d9e6d3fe46.jpg)

<p>Fez uma requisi√ß√£o e ela n√£o vai terminar agora, vai demorar um pouco para essa requisi√ß√£o ser conclu√≠da. Ao realizar a requisi√ß√£o ela vai ser redirecionada ao Event Loop seu posicionamento principal e a Fun√ß√£o de Callback. Logo em seguida vai registrar essa fun√ß√£o de Callback em uma fila, essa fun√ß√£o ficar√° registrada. 
  
Quando a sua opera√ß√£o principal acabar, ela vai chamar a sua fun√ß√£o de Callback, enquanto isso ela vai ficar tudo rodando na sua aplica√ß√£o. Em casos de ler arquivos mais pesados, como de 2GB por exemplo, voc√™ n√£o precisa parar o processamento inteiro para ler o arquivo inteiro e depois voltar, portanto isso √© uma das grandes vantagens.</p>

**Exemplo 1**: Requisi√ß√£o com Promises (Asynchronous Reading)
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108542870-0c91c100-72c3-11eb-8cac-2552152dab53.jpg)

**Exemplo 2**: Ler estrofes de cada vez
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108577334-70d27600-72ff-11eb-908b-5dc638abf445.jpg)
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108577995-a166df80-7300-11eb-8559-20182c3e916a.jpg)

**Exemplo 3**: fun√ß√µes s√≠ncronas e fun√ß√£o ass√≠ncrona
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108634904-bfe0ee00-745a-11eb-8112-c1d9d6434303.jpg)
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108634949-1a7a4a00-745b-11eb-8270-733a2a529a63.jpg)

**Exemplo 4**: Fun√ß√£o de Callback Ass√≠ncrona
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108637266-a777d000-7468-11eb-8d11-c0257fea5ab4.jpg)
![Sem T√≠tulo-1](https://user-images.githubusercontent.com/61624336/108637403-3684e800-7469-11eb-91ba-dc91bb88b202.jpg)

# ‚òÅÔ∏è Cloudnary
<img src="https://res.cloudinary.com/demo/image/upload/cloudinary_icon.png" height="177" align="right">

Vamos fazer os uploads das fotos de perfil ou outros documentos, mas para isso ser√° preciso algum ambiente com capacidade de armazenamento eficaz para tal tarefa. Isso √© a escolha, alguns utilizam algum servi√ßo de armazenamento na computa√ß√£o em nuvem como o **Amazon S3 - Simple Storage Service**, por√©m iremos utilizar o **Cloudnary**.

- Acesse o endere√ßo para a √°rea do dashboard: https://cloudinary.com/console/c-a9df15816f0e18d2cf546b5d8ef6a3
- Acesse o endere√ßo para a √°rea de upload: https://cloudinary.com/console/c-a9df15816f0e18d2cf546b5d8ef6a3/settings/upload

Acesse a √°rea de upload e clique em <a href="https://cloudinary.com/console/c-a9df15816f0e18d2cf546b5d8ef6a3/upload_presets/new">Add upload present</a>.

Em `Upload preset name` nomeie o projeto como `AUTOGLASS-CHAT` e depois clique em `Save`. Veja que j√° foi criado seu ambiente de upload chamado `AUTOGLASS-CHAT`. 

Na se√ß√£o `Signing Mode:` configure para `Unsigned`, isso √© muito importante para a aplica√ß√£o funcionar! 

### Cloud name
```
isaacalves7
```

### API Base URL
```
https://api.cloudnary.com/v1_1/isaacalves7
```

### API Environment variable
```
CLOUDINARY_URL=cloudinary://658366239586916:YDSdH0j38xHQhdDDhV3BAjgCRNE@isaacalves7
```

### Base and Seccure delivery URL
```
http://res.cloudinary.com/isaacalves7
```

### API do UPLOAD
```
https://api.cloudinary.com/v1_1/isaacalves7/image/upload
```

# ‚öõÔ∏é GraphQL
<img src="https://cdn.worldvectorlogo.com/logos/graphql-logo-2.svg" height="177" align="right">

O **GraphQL** √© uma especifica√ß√£o para criar e usar APIs que t√™m sua pr√≥pria linguagem de query. O que isso significa ent√£o? √â que √†s vezes o Graphql √© entendido ou √© percebido como sendo uma tecnologia voltada para bancos de dados, ele n√£o √©. Ele √© uma especifica√ß√£o para APIs, para escrever, criar e utilizar APIs e n√£o est√° ligado a nenhum tipo de banco, inclusive ele pode ser usado com qualquer base de dados, ou mesmo nenhuma base de dados.

> O **GraphQL** √© uma ferramenta para construirmos de forma √°gil APIs que s√£o r√°pidas e vers√°teis.

O Graphql fornece um ambiente para executarmos essas queries usando os dados que fornecermos para ele, n√£o importa de onde esses dados venham. Eles podem vir de um banco SQL, de um banco NoSQL, de uma API de terceiros via endpoint rest, ou at√© mesmo da mem√≥ria do seu computador. E tamb√©m de todos esses juntos, para o SQL n√£o faz diferen√ßa, isso n√£o √© o ponto principal dele.

O Graphql tamb√©m normalmente utilizamos `http` para fazer a comunica√ß√£o, mas na verdade ele √© agn√≥stico com rela√ß√£o a protocolos de comunica√ß√£o. Os **schemas** (esquemas) do Graphql s√£o baseados em como os dados s√£o usados, e n√£o como est√£o armazenados. Isso √© um conceito chave para entender o Graphql, n√£o importa se os dados v√™m de objetos, de APIs, o que acabamos de falar, o que importa √© que o cliente consiga utilizar esses dados da melhor forma poss√≠vel.

Quando falo cliente normalmente estou falando do front ou de quem vai consumir nossa API Graphql. Essa √© uma quest√£o chave. Os schemas s√£o baseados em como os dados s√£o usados, e n√£o importa de onde eles v√™m.

Por exemplo, se us√°ssemos um banco de tabelas para criar um usu√°rio, por exemplo, um usu√°rio de uma escola de ingl√™s, esses usu√°rios t√™m nome, e-mail, se eles est√£o ativos no sistema ou n√£o, e eles podem ser professores, podem ser alunos, podem ser coordena√ß√£o. Se pensarmos, por exemplo, numa tabela SQL, conseguimos montar um usu√°rio completo a partir de duas tabelas, uma com os dados principais, nome, e-mail, etc, e outra para definir os poss√≠veis roles, os poss√≠veis papeis desse usu√°rio no sistema.

Ent√£o voc√™ teria uma tabela de roles que tem professor, aluno, coordena√ß√£o, e por a√≠ vai. Com o Graphql pensamos em como esses dados seriam usados pelo lado cliente e o cliente pode montar as queries a partir dessa premissa.

Vamos supor que numa `feature` qualquer desse sistema de escola de cliente, o lado cliente precisa receber somente o nome do usu√°rios da tabela `users` e da tabela `roles` ele s√≥ precisa receber uma `string` com o tipo de role, professor, aluno, etc. Ele n√£o precisa receber mais nada.

Ele quer fazer uma query que pegue de `users` somente o nome, e do `role` desse user, do papel desse usu√°rio, somente a string de tipo, ele n√£o quer receber mais nada, somente isso.

A partir dessa query que o cliente consegue fazer em Graphql ele recebe um JSON somente com o que ele quer no formato agregado de uma forma que para o cliente faz mais sentido, s√£o dados mais concisos e somente com o que o cliente pediu.

O Graphql com isso procura resolver um problema em rest, uma quest√£o do rest que costumamos chamar de **overfitting**, que seria **super requisi√ß√£o**, e tamb√©m o **underfitting**, que √© **sub requisi√ß√£o**. √â quando o endpoint ou traz muitos dados que n√£o precisamos numa requisi√ß√£o ou o contr√°rio, precisamos de mais de uma requisi√ß√£o para ter os dados que precisamos. Ent√£o, o Graphql vem a√≠ para resolver essa quest√£o e fazer com que nosso cliente pe√ßa, em uma requisi√ß√£o s√≥ ele receba somente o que ele quer e mais nada. Podemos dizer que o Graphql √© uma tecnologia voltada para front? Podemos, porque a ideia √© melhorar, otimizar essa rela√ß√£o dos clientes com os dados que ele recebe do back, que √© uma tecnologia focada no front, mas claro que vamos desenvolver nosso servidor Graphql no back.

Para o cliente, para a parte de front, ele vai ter menos requisi√ß√µes, vai visualizar os dados de uma forma melhor, os dados agregados de uma forma melhor para ele, mas dados mais enxutos, inclusive, de forma que fa√ßa mais sentido para ele, mas tamb√©m tem bastante benef√≠cios para a parte do back, para o lado do servidor, uma vez que livra o backend de fazer muitas implementa√ß√µes de muitos endpoints.

O desenvolvimento fica mais √°gil. Se voc√™ tem que desenvolver um novo produto ou uma nova `feature` para o seu produto, evita que o backend caia naquela situa√ß√£o de ter que desenvolver endpoints sem fim para cada coisa nova que pode ou n√£o entrar no sistema.

Fica mais √°gil porque o front n√£o fica dependendo tanto do back para criar um endpoint para cada coisa que ele precisa fazer, e o backend fica mais agilizado tamb√©m sem ter que ficar fazendo todas essas implementa√ß√µes para uma coisa que no final √†s vezes pode at√© entrar no sistema ou n√£o.

Vamos come√ßar com `npm install graphql`, que √© a implementa√ß√£o refer√™ncia para trabalhar **GraphQL com Node**.

[![NPM](https://img.shields.io/badge/-npm_install-fff?style=social&logo=NPM&logoColor=red)](#)

```sh
npm install graphql
```

Como o GraphQL √© realmente s√≥ uma especifica√ß√£o, usaremos tamb√©m o pacote de ferramentas **Apollo** para trabalhar com GraphQL:

[![NPM](https://img.shields.io/badge/-npm_install-fff?style=social&logo=NPM&logoColor=red)](#)

```sh
npm install apollo-server
```

O Apollo √© uma implementa√ß√£o bem completa do GraphQL, ele j√° tem as ferramentas que precisaremos, come√ßando pelo principal: um servidor GraphQL.

Vamos criar o arquivo `index.js` dentro da pasta "api". Este ser√° nosso ponto de entrada da nossa aplica√ß√£o.

J√° instalamos o Apollo Server, agora vamos import√°-lo. Por enquanto, queremos apenas o **ApolloServer** do pacote de ferramentas do Apollo:

[![index.js](https://img.shields.io/badge/-index.js-fff?style=social&logo=javascript&logoColor=yellow)](#)

```javascript
// Arquivo index.js

const { ApolloServer } = require('apollo-server')

const server = new ApolloServer()
```

<a href="https://www.apollographql.com/docs/apollo-server/"><img src="https://cdn.worldvectorlogo.com/logos/apollo-graphql-compact.svg" align="right" height="177"></a>

O GraphQL faz uma separa√ß√£o clara entre **estrutura** e **comportamento**.

A estrutura do GraphQL est√° no schema, no qual especifica-se o que o servidor GraphQL est√° estruturado para fazer, com seus tipos e objetos.

Essa estrutura precisa ser implementada de alguma forma para que possa funcionar. No GraphQL, isso se d√° atrav√©s do que chamamos de fun√ß√µes `resolver`, ou s√≥ `resolvers`. √â nos `resolvers` que implementamos o comportamento. Cada campo em um schema GraphQL √© implementado atrav√©s de um resolver.

√â aqui que entram ferramentas como Apollo. Elas servem para nos ajudar a implementar a especifica√ß√£o GraphQL em nossa aplica√ß√£o.

[![index.js](https://img.shields.io/badge/-index.js-fff?style=social&logo=javascript&logoColor=yellow)](#)

```javascript
// Arquivo index.js

const { ApolloServer } = require('apollo-server')

const server = new ApolloServer({ typeDefs, resolvers })
```

Precisamos passar para essa nova inst√¢ncia de `ApolloServer()` como par√¢metro um objeto que tem duas propriedades. A primeira √© `typeDefs` e a segunda √© `resolvers`, como est√° na documenta√ß√£o. S√£o partes fundamentais para entender o Graphql, ent√£o vamos come√ßar vendo s√≥ o `typeDefs`, depois passamos para os `resolvers`.

O que √© `typeDefs`, que tipo de defini√ß√£o de tipo √© isso? Para entendermos como funcionam os tipos neste primeiro momento, vamos fazer o seguinte. Vou criar uma const users e dentro dela uma array com dois objetos. Vou fazer dois usu√°rios bem simplificados, s√≥ com duas propriedades, a propriedade nome, que vou passar Ana, e se est√° ativo ou n√£o, vou passar um booleano true.

Mais outro objeto, com nome M√°rcia e ativo `false`. Como o Graphql n√£o se importa com a origem dos dados, vamos come√ßar pequenos para poder focarmos no que √© o typeDefs, no que s√£o os tipos e o schema do Graphql.

Se pensarmos, como fazemos para definir uma query baseada nesses dados, quero fazer uma query que pegue usu√°rios de uma base de dados, como vimos nos slides anteriores. Para isso precisamos definir um schema do Graphql. O schema √© o centro, o core de qualquer servidor Graphql, porque ele define o que pode ser feito no servidor, o que d√° para acessar e de que forma.

O schema ent√£o √© composto por tipos, por types. Vamos usar a linguagem pr√≥pria do Graphql para escrever esse schema aqui mesmo no nosso arquivo index, e dentro dele um tipo. Como far√≠amos para escrever baseado na nossa const users, criar um objeto?

Ele vai chamar type, porque vamos criar o primeiro tipo da nossa defini√ß√£o de tipos que vai entrar no servidor do ApolloServer(). Vai ser um tipo User, com letra mai√∫scula, como √© padr√£o do Graphql.

Esse tipo User que estou criando agora vai ter tr√™s campos. O primeiro vai ser nome, como est√° l√° em cima. Nome √© um campo do tipo String, com letra mai√∫scula, como √© definido pelo Graphql, e uma exclama√ß√£o. Exclama√ß√£o significa que o campo n√£o pode ser nulo, ele sempre tem que ter algum dado.

Ele vai ter tamb√©m ativo, que vai ser um campo do tipo booleano, que tamb√©m vai ser obrigat√≥rio, tamb√©m vai ter exclama√ß√£o, e vou colocar um terceiro campo, que vai ser o campo do tipo e-mail, e vai ser um campo do tipo string que n√£o vai ser obrigat√≥rio, n√£o vai ter exclama√ß√£o. Ele pode ser nulo.

Mas tem um problema aqui. Eu criei esse type User, s√≥ que acabei de falar que √≠amos usar a linguagem pr√≥pria do Graphql para isso, a SDL, linguagem de defini√ß√£o de esquemas, scheme definition language. Como fa√ßo ent√£o para o JavaScript entender o que escrevi aqui?

Para isso vamos l√° no `ApolloServer()`, na primeira linha onde importamos e vamos importar mais um m√≥dulo chamado gql. Com esse m√≥dulo gql consigo fazer o JavaScript interpretar o que est√° escrito na linguagem do Graphql, fa√ßo isso criando uma const, vou chamar de typeDefs, porque aqui dentro que estou definindo o meu schema, estou passando os tipos que vamos trabalhar nesse servidor, nessa nova inst√¢ncia de ApolloServer() que estamos criando aqui.

Vai ser igual gql e vou abrir duas crases, as mesmas crases que usamos para criar templates, strings no JavaScript, e entre essas crases vou passar meu type User. Agora acabamos de criar nosso primeiro tipo e nossa const typeDefs est√° aguardando o esquema de Graphql que vamos usar nesse nosso servidor que vamos subir daqui a pouco.

√â importante trabalharmos com essa linguagem SDL, essa linguagem espec√≠fica do Graphql, porque como o Graphql trabalha com v√°rias linguagens de backend, como por exemplo Python, Node, JavaScript, usar essa linguagem dele garante uma padroniza√ß√£o nos esquemas, por isso escrevemos os schemas usando essa linguagem pr√≥pria do Graphql.

Acabamos de criar nosso primeiro tipo, ainda vamos criar v√°rios tipos, vamos falar bastante deles, ent√£o vamos em frente continuando para subirmos nosso primeiro servidor Graphql com Apollo.
